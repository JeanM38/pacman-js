(()=>{const t=document.getElementById("root"),e=700,o=[];let i=null;const s={ArrowUp:-90,ArrowDown:90,ArrowLeft:180,ArrowRight:0},l=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],p=100,h=["cyan","#f5b041","#e74c3c","#e8daef"];var d=document.createElement("style");d.innerHTML=" @keyframes eat {  0% {    clip-path: polygon(100% 74%, 44% 48%, 100% 21%);  }  25% {    clip-path: polygon(100% 60%, 44% 48%, 100% 40%);  }  50% {    clip-path: polygon(100% 50%, 44% 48%, 100% 50%);  }  75% {    clip-path: polygon(100% 59%, 44% 48%, 100% 35%);  }  100% {    clip-path: polygon(100% 74%, 44% 48%, 100% 21%);  }}",t.appendChild(d);const n=document.createElement("div");n.setAttribute("id","screen"),n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.style.width="100%",n.style.height="95vh";const a=document.createElement("div");a.setAttribute("id","gameFloor"),a.style.width="700px",a.style.height="700px",a.style.border="blue 1px solid",a.style.position="relative",a.style.backgroundColor="black";const r=[{width:650,height:30,left:15,top:20},{width:650,height:30,left:15,top:650},{width:30,height:300,left:15,top:20},{width:30,height:250,left:15,top:430},{width:30,height:300,left:650,top:20},{width:30,height:250,left:650,top:430},{width:70,height:180,left:130,top:260},{width:70,height:180,left:480,top:260},{width:100,height:70,left:120,top:520},{width:100,height:70,left:460,top:520},{width:100,height:20,left:290,top:570},{width:100,height:70,left:120,top:110},{width:100,height:70,left:460,top:110},{width:100,height:20,left:290,top:110},{width:10,height:178,left:270,top:260},{width:10,height:178,left:400,top:260}],c=[{top:70,left:80,id:1},{top:110,left:80,id:2},{top:150,left:80,id:3},{top:190,left:80,id:4},{top:230,left:80,id:5},{top:270,left:80,id:6},{top:310,left:80,id:7},{top:350,left:80,id:8},{top:390,left:80,id:9},{top:430,left:80,id:10},{top:470,left:80,id:11},{top:510,left:80,id:12},{top:550,left:80,id:13},{top:590,left:80,id:14},{top:615,left:80,id:15},{top:615,left:120,id:16},{top:615,left:160,id:17},{top:615,left:200,id:18},{top:615,left:240,id:19},{top:615,left:280,id:20},{top:615,left:320,id:21},{top:615,left:360,id:22},{top:615,left:400,id:23},{top:615,left:440,id:24},{top:615,left:480,id:25},{top:615,left:520,id:26},{top:615,left:560,id:27},{top:615,left:610,id:28},{top:590,left:610,id:29},{top:550,left:610,id:30},{top:510,left:610,id:31},{top:470,left:610,id:32},{top:430,left:610,id:33},{top:390,left:610,id:34},{top:350,left:610,id:35},{top:310,left:610,id:36},{top:270,left:610,id:37},{top:230,left:610,id:38},{top:190,left:610,id:39},{top:150,left:610,id:40},{top:110,left:610,id:41},{top:70,left:610,id:42},{top:70,left:120,id:43},{top:70,left:160,id:44},{top:70,left:200,id:45},{top:70,left:240,id:46},{top:70,left:280,id:47},{top:70,left:320,id:48},{top:70,left:360,id:49},{top:70,left:400,id:50},{top:70,left:440,id:51},{top:70,left:480,id:52},{top:70,left:520,id:53},{top:70,left:560,id:54},{top:215,left:120,id:55},{top:215,left:160,id:56},{top:215,left:200,id:57},{top:215,left:240,id:58},{top:215,left:280,id:59},{top:215,left:320,id:60},{top:215,left:360,id:61},{top:215,left:400,id:62},{top:215,left:440,id:63},{top:215,left:480,id:64},{top:215,left:520,id:65},{top:215,left:560,id:66},{top:475,left:120,id:67},{top:475,left:160,id:68},{top:475,left:200,id:69},{top:475,left:240,id:70},{top:475,left:280,id:71},{top:475,left:320,id:72},{top:475,left:360,id:73},{top:475,left:400,id:74},{top:475,left:440,id:75},{top:475,left:480,id:76},{top:475,left:520,id:77},{top:475,left:560,id:78},{top:430,left:440,id:79},{top:390,left:440,id:80},{top:350,left:440,id:81},{top:310,left:440,id:82},{top:270,left:440,id:83},{top:430,left:230,id:84},{top:390,left:230,id:85},{top:350,left:230,id:86},{top:310,left:230,id:87},{top:270,left:230,id:88}];class f{constructor(t,e,o){return this.posX=t,this.posY=e,this.direction="ArrowRight",this.wallsInfo=o,this}getDirection=()=>this.direction;setDirection=t=>{this.direction=t};getPosX=()=>this.posX;getPosY=()=>this.posY;setPosX=t=>{this.posX=t};setPosY=t=>{this.posY=t};detectLimitVerticalFloor=t=>!(t<=0||t+50>=e);detectLimitHorizontalFloor=t=>!(t-25<=0||t+25>=700);detectVerticalWalls=(t,o)=>{let i=!0;return this.wallsInfo.forEach((s=>{(t<=e-s.top+2&&t>=e-s.top||t+50>=e-s.top-s.height-2&&t+50<=e-s.top-s.height)&&o+25>=s.left&&o-25<=s.left+s.width&&(i=!1)})),i};detectHorizontalWalls=(t,o)=>{let i=!0;return this.wallsInfo.forEach((s=>{(t+25>=s.left-2&&t+25<=s.left||t-25>=s.left+s.width&&t-25<=s.left+s.width+2)&&o+25<=e-s.top&&o>=e-s.top-s.height&&(i=!1)})),i};handleMove=(t,e)=>{switch(t){case"ArrowUp":this.detectLimitVerticalFloor(this.posY+e)&&this.detectVerticalWalls(this.posY+e,this.posX)&&(this.posY=this.posY+e,this.direction="ArrowUp");break;case"ArrowDown":this.detectLimitVerticalFloor(this.posY-e)&&this.detectVerticalWalls(this.posY-e,this.posX)&&(this.posY=this.posY-e,this.direction="ArrowDown");break;case"ArrowRight":this.detectLimitHorizontalFloor(this.posX+e)&&this.detectHorizontalWalls(this.posX+e,this.posY)&&(this.posX=this.posX+e,this.direction="ArrowRight");break;case"ArrowLeft":this.detectLimitHorizontalFloor(this.posX-e)&&this.detectHorizontalWalls(this.posX-e,this.posY)&&(this.posX=this.posX-e,this.direction="ArrowLeft")}}}class y extends f{constructor(t,e,o,i){const s=super(t,e,o);this._super=s,this.pac=i,this.countTop=0,this.countRight=0,this.switchLeft=!1,this.switchTop=!1,this.intervalId=null,this.biasDirectionX=Math.floor(100*Math.random())%2==0?"ArrowRight":"ArrowLeft",this.biasDirectionY=Math.floor(100*Math.random())%2==0?"ArrowUp":"ArrowDown";const l=Math.floor(4*Math.random()),p=document.createElement("div");p.style.height="20px",p.style.width="35px",p.style.display="flex",p.style.justifyContent="space-around",p.style.alignItems="flex-end";const d=document.createElement("div");d.style.backgroundColor="#fff",d.style.height="15px",d.style.width="15px",d.style.borderRadius="100%",d.style.display="flex",d.style.justifyContent="flex-start",d.style.alignItems="center";const n=document.createElement("div");n.style.backgroundColor="blue",n.style.height="7px",n.style.width="7px",n.style.borderRadius="100%",d.appendChild(n),p.appendChild(d);const a=d.cloneNode(),r=n.cloneNode();a.appendChild(r),p.appendChild(a);const c=document.createElement("div");c.style.backgroundRepeat="repeat-x",c.style.bottom="-10px",c.style.height="10px",c.style.position="absolute",c.style.width="35px",c.style.background=`linear-gradient(-45deg, transparent 75%, ${h[l]} 75%) 0 50%, linear-gradient( 45deg, transparent 75%, ${h[l]} 75%) 0 50%`,c.style.backgroundSize="10px 10px, 10px 10px",this.ghost=document.createElement("div"),this.ghost.setAttribute("class","ghost"),this.ghost.style.height="40px",this.ghost.style.width="35px",this.ghost.style.borderRadius="30% 30% 0 0",this.ghost.style.backgroundColor=h[l],this.ghost.style.position="absolute",this.ghost.style.left=this.posX-25+"px",this.ghost.style.bottom=`${this.posY}px`,this.ghost.appendChild(p),this.ghost.appendChild(c),this.initialization(this)}initialization=t=>{t.intervalId=setInterval((()=>{!function(){let e=Math.floor(4*Math.random());const o=Math.floor(100*Math.random()),i=Math.floor(100*Math.random());e=2===e&&o%2==0?3:e,e=1===e&&i%2==0?0:e;let s=l[e];"ArrowUp"!==s&&"ArrowDown"!==s||(t.countTop<p&&!t.switchTop?(s=t.biasDirectionY,t.countTop+=1):t.countTop!=p||t.switchTop||(t.countTop=0,t.switchTop=!0),t.countTop<p&&t.switchTop?(s="ArrowDown"===t.biasDirectionY?"ArrowUp":"ArrowDown",t.countTop+=1):t.countTop==p&&t.switchTop&&(t.countTop=0,t.switchTop=!1)),"ArrowLeft"!==s&&"ArrowRight"!==s||(t.countRight<p&&!t.switchLeft?(s=t.biasDirectionX,t.countRight+=1):t.countRight!=p||t.switchLeft||(t.countRight=0,t.switchLeft=!0),t.countRight<p&&t.switchLeft?(s="ArrowRight"===t.biasDirectionX?"ArrowLeft":"ArrowRight",t.countRight+=1):t.countRight==p&&t.switchLeft&&(t.countRight=0,t.switchLeft=!1)),t._super.handleMove(s,5),t.updatePosition()}()}),70)};getGhost=()=>this.ghost;updatePosition=()=>{(Math.abs(this.posY-this.pac.getPosY()-50)<15||Math.abs(this.pac.getPosY()-this.posY-50)<15)&&Math.abs(this.posX-this.pac.getPosX())<25&&(clearInterval(this.intervalId),b()),(Math.abs(this.pac.getPosX()+50-this.posX)<10||Math.abs(this.posX+35-this.pac.getPosX())<10)&&Math.abs(this.pac.getPosY()-this.posY)<25&&(clearInterval(this.intervalId),b()),this.ghost.style.left=this.posX-25+"px",this.ghost.style.bottom=`${this.posY}px`}}const u=new class extends f{constructor(t,e,o,i){const s=super(t,e,o);this._super=s,this.foodsInfo=i,this.countFoods=0,this.pac=document.createElement("div"),this.pac.setAttribute("id","pacman"),this.pac.style.width="50px",this.pac.style.height="50px",this.pac.style.borderRadius="25px",this.pac.style.border="solid 2px black",this.pac.style.backgroundColor="yellow",this.pac.style.position="absolute",this.pac.style.left=this.posX-25+"px",this.pac.style.bottom=`${this.posY}px`;const l=document.createElement("div");l.style.backgroundColor="black",l.style.position="absolute",l.style.width="100%",l.style.height="100%",l.style.clipPath="polygon(100% 74%, 44% 48%, 100% 21%)",l.style.animationName="eat",l.style.animationDuration="0.7s",l.style.animationIterationCount="infinite",this.pac.appendChild(l),this.initialization(this)}initialization=t=>{document.addEventListener("keydown",(function(e){l.includes(e.key)&&(t._super.handleMove(e.key,5),t.updatePosition())}))};getPacMan=()=>this.pac;getCountFood=()=>this.countFoods;eatFood=()=>{this.foodsInfo.forEach(((t,i)=>{if((Math.abs(e-t.top+10-this.posY)<=3||Math.abs(this.posY+50-(e-t.top))<=3)&&Math.abs(this.posX-t.left)<10){const e=document.getElementById(t.id);e&&(e.style.display="none",o.includes(t.id)||(this.countFoods+=1,o.push(t.id)),88===this.countFoods&&m())}if((Math.abs(this.posX+50-t.left)<=3||Math.abs(t.left+10-this.posX)<=3)&&Math.abs(this.posY-(e-t.top))<=40){const e=document.getElementById(t.id);e&&(e.style.display="none",o.includes(t.id)||(this.countFoods+=1,o.push(t.id)),88===this.countFoods&&m())}}))};updatePosition=()=>{this.pac.style.transform=`rotate(${s[this.direction]}deg)`,this.pac.style.left=this.posX-25+"px",this.pac.style.bottom=`${this.posY}px`,this.eatFood()}}(350,50,r,c),g=r.map(((t,e)=>{const o=document.createElement("div");return o.setAttribute("id",`wall-${e}`),o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.border="#3F51B5 7px double",o.style.boxSizing="border-box",o.style.borderRadius="2px",o.style.backgroundColor="black",o.style.position="absolute",o.style.top=`${t.top}px`,o.style.left=`${t.left}px`,o})),w=c.map(((t,e)=>{const o=document.createElement("div");return o.setAttribute("id",t.id),o.style.width="10px",o.style.height="10px",o.style.backgroundColor="#f3f1d6",o.style.position="absolute",o.style.top=`${t.top}px`,o.style.left=`${t.left}px`,o}));function b(){const t=document.createElement("div");t.style.width="300px",t.style.height="300px",t.style.border="solid 3px #3F51B5",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.backgroundColor="black",t.style.zIndex=999,t.style.position="absolute",t.style.left="200px",t.style.top="200px";const e=document.createElement("div");e.innerHTML="Game Over",e.style.color="red",e.style.fontWeight="bold",e.style.fontSize="40px",t.appendChild(e),a.appendChild(t)}function m(){const t=document.createElement("div");t.style.width="300px",t.style.height="300px",t.style.border="solid 3px #3F51B5",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.backgroundColor="black",t.style.zIndex=999,t.style.position="absolute",t.style.left="200px",t.style.top="200px";const e=document.createElement("div");e.innerHTML="You won!!",e.style.color="red",e.style.fontWeight="bold",e.style.fontSize="40px",t.appendChild(e),a.appendChild(t)}g.forEach((t=>a.appendChild(t))),w.forEach((t=>a.appendChild(t))),a.appendChild(u.getPacMan()),n.appendChild(a),t.appendChild(n),function(){const t=new y(350,350,r,u);a.appendChild(t.getGhost()),i=setInterval((()=>{a.appendChild(new y(350,350,r,u).getGhost())}),1e4)}()})();